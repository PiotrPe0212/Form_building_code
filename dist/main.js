!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var o;n(0);function r(e,t){for(var n,o,r=1;r&&(o="".concat(e,"_").concat(r),void 0!=(n=document.getElementById("".concat(o))));){switch(n=n.querySelector("input"),t){case"Yes/No":n.pattern="Yes|No",n.title="Only Yes/No condition";break;case"Text":n.pattern="[a-zA-Z -]+",n.title="Letters only";break;case"Number":n.pattern="[0-9]+",n.title="Numbers only"}r++}}var i,c="FormDatabase",a="FormBuilder",u=1;var d,s=function(){if(void 0!=o)return i=o.transaction(a,"readwrite");console.log("wait")},l=function(){if(void 0!=o)return d=i.objectStore(a);console.log("wait")},f={ID:"0",question:"",type:"",condition:"",condition_type:""};function v(e,t,n){var o;s(),l();var i=d.index("ID");i.get("".concat(e)).onsuccess=function(i){switch(o=i.target.result,t){case"question":o.question=n;break;case"type":o.type=n,r(e,n);break;case"condition":o.condition=n;break;case"condition_type":o.condition_type=n}var c=d.put(o);c.onsuccess=function(e){y()},c.onerror=function(e){m(e)}},i.get(e).onerror=function(e){m(e)}}var p=[];var m=function(e){console.log("Error ".concat(e.errorCode))},y=function(){console.log("Everything is fine. All done!")};function b(e){var t=e,n=document.getElementById("".concat(t)),o=Array.from(n.getElementsByClassName("form"));for((o=o.map(function(e){return e.id})).push(t),function(e){s(),l(),d.openCursor().onsuccess=function(t){var n=t.target.result;n?(e.forEach(function(e){n.value.ID==e&&(n.delete().onsuccess=function(){y()})}),n.continue()):y()}}(o);n.hasChildNodes();)n.removeChild(n.firstChild);n.remove()}var h,E,g,q,I,x,L,S,_=0,D=[];function T(e,t){S=e;var n=Array.from(document.querySelectorAll("*[id]"));if(D=n.map(function(e){return e.id}),"add"==t)E=void 0==E?0:e;else if("load"==t){E=S.ID,q=S.question,I=S.type,x=S.condition,L=S.condition_type;var o=E.length-2;g=E.slice(0,o)}var r=function(e){return document.createElement(e)},c=function(e,t){return e.innerHTML=t},a=function(e,t){return e.appendChild(t)};h=0==E?document.querySelector("section"):document.getElementById("".concat(E)),"load"==t&&(h=g?document.getElementById("".concat(g)):document.querySelector("section"));var u=r("div");a(h,u);var p=r("form");if(a(u,p),0!=E&&"add"==t||""!=g&&"load"==t){var N=r("span");a(p,N),N.innerHTML="Condition";var A=r("input");a(p,A),A.addEventListener("change",function(){v(this.parentElement.parentElement.id,"condition",this.value)}),A.required=!0;var C=r("select");a(p,C),C.required=!0;var O=r("option");c(O,"Equals"),a(C,O);var j=r("option");c(j,"Greater than"),a(C,j);var k=r("option");c(k,"Less than"),a(C,k),a(p,r("br")),C.addEventListener("change",function(){v(this.parentElement.parentElement.id,"condition_type",this.value)}),"load"==t&&(A.setAttribute("type","text"),A.setAttribute("value",x),C.value=L)}var M=r("span");a(p,M),M.innerHTML="Question";var w=r("input");a(p,w),a(p,r("br")),w.required=!0;var B=r("span");a(p,B),B.innerHTML="Type";var P=r("select");a(p,P),P.required=!0,a(p,r("br"));var Y=r("option");c(Y,"Text"),a(P,Y),Y.value="Text";var H=r("option");c(H,"Number"),a(P,H),H.value="Number";var F=r("option");c(F,"Yes/No"),a(P,F),F.value="Yes/No";var z=r("button");c(z,"Add Sub-Input"),a(u,z);var G=r("button");c(G,"Delete"),a(u,G),"load"==t&&(w.setAttribute("type","text"),w.setAttribute("value",q),P.value=I);var Q=function(e){return e==_};!function(){var e=1,t=0;do{_=0==E?e:"".concat(E,"_").concat(e),Q(),t=D.find(Q),e++}while(void 0!=t)}(),"load"==t&&(_=E),z.addEventListener("click",function(){T(this.parentElement.id,"add")}),G.addEventListener("click",function(){b(this.parentElement.id)}),w.addEventListener("change",function(){v(this.parentElement.parentElement.id,"question",this.value)}),P.addEventListener("change",function(){v(this.parentElement.parentElement.id,"type",this.value)}),u.id=_,"add"==t&&function(e){f.ID="".concat(e),s(),l(),i.oncomplete=function(e){y()},i.onerror=function(e){m(e)};var t=d.add(f);t.onsuccess=function(e){y()},t.onerror=function(e){m(e)}}(_),u.classList.add("form")}document.querySelector("section").querySelector("button").addEventListener("click",function(){T(this.parentElement.id,"add")}),document.addEventListener("DOMContentLoaded",function(){var e=indexedDB.open(c,u);e.onsuccess=function(e){o=e.target.result,s(),l(),d.openCursor().onsuccess=function(e){var t=e.target.result;t?(p.push(t.value),t.continue()):function(e){var t=e;t.forEach(function(e){T(e,"load")}),t.forEach(function(e){r(e.ID,e.type)})}(p)},y()},e.onerror=function(e){m(e)},e.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(a,{keyPath:"id",autoIncrement:!0});t.createIndex("ID","ID",{unique:!1}),t.createIndex("question","question",{unique:!1}),t.createIndex("type","type",{unique:!1}),t.createIndex("condition","condition",{unique:!1}),t.createIndex("conditionType","conditionType",{unique:!1})}})}]);